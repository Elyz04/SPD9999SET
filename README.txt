*===============================================================*
* 業務仕様説明（詳細版）                                          
*---------------------------------------------------------------*
* プログラムID : PGM01                                                                               
*---------------------------------------------------------------*
* プログラム概要                                                   
* 本プログラムは、銀行ABCの預金管理システムにおいて、
* マルチアカウント・マルチ預金契約に対応した利息計算と精算処理を行う
* COBOLプログラムである。 
*---------------------------------------------------------------*
* 主な処理フロー
*---------------------------------------------------------------*
* 1. FUNCTION-001 (CALCULATE_INTEREST)
*    - DB_ACCOUNT_SAVINGS.STATUS = '1' の有効契約を対象
*    - 各契約に対して以下を実行：
*        1. 契約種別（NON-TERM / fixed-03 / fixed-06 / fixed-12）
*           を判定
*        2. DB_INTEREST_INFO から利率を取得
*        3. 利息を計算（単利計算）：
*           ・非定期（NON-TERM）：
*             利息 = 元本 × 利率 × 経過日数 ÷ 365
*           ・定期（TERM）：
*               - 満期到達時：利息 = 
*                 元本 × 利率 × 契約期間日数 ÷ 365
*               - 満期未到達時：利息 = 
*                 元本 × 非定期利率 × 経過日数 ÷ 365
*        4. DB_ACCOUNT_SAVINGS の INTEREST と MONEY 
*           (=元本+利息) を更新
*    - 注意点：
*        ・複数契約をまとめて処理しない（1契約ずつ処理）
*        ・利率はDBから取得、ハードコード禁止
*---------------------------------------------------------------*
* 2. FUNCTION-002 (SETTLEMENT)
*    - DB_ACCOUNT_SAVINGS.STATUS = '1' の契約を対象
*    - 各契約に対して以下を実行：
*        1. 現在日付と契約満期日を比較し、満期到達か前倒しか判定
*        2. 前倒しの場合は利息を非定期利率で再計算
*        3. DB_ACCOUNT_BALANCE.BALANCE に契約の MONEY を加算
*           - 同一口座に複数契約がある場合は順次加算
*           - 上書き禁止
*        4. DB_ACCOUNT_SAVINGS.STATUS を '9' に更新（完了）
*    - 注意点：
*        ・各契約ごとに独立して更新
*        ・SQLエラー時はログ出力・ROLLBACK・異常終了
*---------------------------------------------------------------*
* 対象テーブル
*---------------------------------------------------------------*
* DB_ACCOUNT_SAVINGS : 預金契約情報（普通預金／定期預金）
*    - ORDER_ID, 
*    - ACC_ID, 
*    - SAVING_TYPE, 
*    - START_DATE, 
*    - END_DATE, 
*    - MONEY_ROOT, 
*    - INTEREST, 
*    - MONEY, 
*    - STATUS
* DB_INTEREST_INFO   : 預金種別別利率マスタ
*    - SAVING_TYPE, INTEREST_RATE
* DB_ACCOUNT_BALANCE : 口座残高管理
*    - ACC_ID, BALANCE
*---------------------------------------------------------------*
* 処理フロー概要（ビジネス視点）
*---------------------------------------------------------------*
* 1. 利息計算（FUNCTION-001）
*    - SELECT STATUS='1' の契約
*    - FOR EACH 契約：
*        ・利率取得
*        ・経過日数計算
*        ・利息計算
*        ・DB_ACCOUNT_SAVINGS 更新
* 2. 精算処理（FUNCTION-002）
*    - SELECT STATUS='1' の契約
*    - FOR EACH 契約：
*        ・満期判定
*        ・必要に応じ利息再計算
*        ・DB_ACCOUNT_BALANCE に加算
*        ・DB_ACCOUNT_SAVINGS.STATUS 更新
*---------------------------------------------------------------*
* エラー処理
*---------------------------------------------------------------*
* - SQLCODE < 0 の場合：
*     ・HV-ABEND-BREAKPOINT にモジュール名格納
*     ・ログ出力
*     ・ROLLBACK
*     ・異常終了（STOP RUN）
*---------------------------------------------------------------*
* 注意事項
*---------------------------------------------------------------*
* - 複数契約は個別に処理
* - 利率はDBから取得
* - Money = Money_Root + Interest
* - 前倒し精算は非定期利率を使用
*===============================================================*
