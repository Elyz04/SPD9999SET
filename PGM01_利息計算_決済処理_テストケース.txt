000000*****************************************************************
000000* テストケース仕様書（PGM01 利息計算・決済処理用）
000000*---------------------------------------------------------------*
000000* プログラムID : PGM01
000000*---------------------------------------------------------------*
000000* プログラム概要
000000* 本テストケースは、銀行ABCの預金管理システムにおける
000000* PGM01プログラムの利息計算処理（FUNCTION-001）および
000000* 決済処理（FUNCTION-002）の正当性を検証する。
000000*
000000* 本プログラムは、JCL から渡されるパラメータにより
000000* 実行対象の機能を制御する。
000000*---------------------------------------------------------------*
000000* テスト目的
000000*---------------------------------------------------------------*
000000* 1. FUNCTION-001 において、仮利息および合計金額が
000000*    正しく計算・更新されることを確認する
000000* 2. FUNCTION-002 において、決済処理が正しく行われることを確認する
000000* 3. SQLエラー発生時に ABEND 処理が正しく行われることを確認する
000000*---------------------------------------------------------------*
000000* 前提条件
000000*---------------------------------------------------------------*
000000* - DB_ACCOUNT_SAVINGS テーブルが存在し、テストデータが登録されていること
000000* - 利率は DB_INTEREST_INFO テーブルから取得されること
000000* - 対象データは STATUS = '1' のレコードのみとする
000000* - 処理は 1 レコード単位で実行される
000000*---------------------------------------------------------------*
000000* パラメータ仕様（JCL）
000000*---------------------------------------------------------------*
000000* PARM = '1' : FUNCTION-001（利息計算処理のみ）
000000* PARM = '2' : FUNCTION-002（決済処理のみ）
000000* PARM = '3' : FUNCTION-001 + FUNCTION-002 を順に実行
000000* 上記以外 : 異常終了（STOP RUN）
000000*---------------------------------------------------------------*
000000* 1. 正常系テストケース（Normal Case）
000000*---------------------------------------------------------------*
000000* ケース1 : FUNCTION-001 非定期預金の仮利息計算
000000*---------------------------------------------------------------*
000000* 条件
000000*   - PARM = '1'
000000*   - DB_ACCOUNT_SAVINGS.STATUS = '1'
000000*   - SAVING_TYPE = NON-TERM
000000*
000000* 処理内容
000000*   - 現在日付を取得する
000000*   - START_DATE から現在日付までの経過日数を算出する
000000*   - 利息を以下の式で計算する
000000*
000000*     利息 = MONEY_ROOT × 利率 × 経過日数 ÷ 12
000000*
000000*   - 合計金額を算出する
000000*
000000*     MONEY = MONEY_ROOT + INTEREST
000000*
000000* 期待結果
000000*   - DB_ACCOUNT_SAVINGS.INTEREST が更新されること
000000*   - DB_ACCOUNT_SAVINGS.MONEY が更新されること
000000*---------------------------------------------------------------*
000000* ケース2 : FUNCTION-001 定期預金の仮利息計算（満期未考慮）
000000*---------------------------------------------------------------*
000000* 条件
000000*   - PARM = '1'
000000*   - SAVING_TYPE = FIXED
000000*
000000* 処理内容
000000*   - 満期判定は行わず、START_DATE から現在日付までの
000000*     実経過日数（WS-DAYS-ACTUAL）を使用する
000000*   - 利息計算式は非定期と同一とする
000000*
000000* 期待結果
000000*   - 仮利息として INTEREST / MONEY が更新されること
000000*---------------------------------------------------------------*
000000* ケース3 : FUNCTION-002 決済処理
000000*---------------------------------------------------------------*
000000* 条件
000000*   - PARM = '2'
000000*   - DB_ACCOUNT_SAVINGS.STATUS = '1'
000000*
000000* 処理内容
000000*   - 対象データを取得する
000000*   - 決済処理を実施する（残高更新・ステータス更新）
000000*
000000* 期待結果
000000*   - 口座残高が更新されること
000000*   - ステータスが決済済状態に更新されること
000000*---------------------------------------------------------------*
000000* ケース4 : PARM = '3' の場合
000000*---------------------------------------------------------------*
000000* 条件
000000*   - PARM = '3'
000000*
000000* 処理内容
000000*   - FUNCTION-001 を実行後、FUNCTION-002 を続けて実行する
000000*
000000* 期待結果
000000*   - 利息計算後に決済処理が行われること
000000*---------------------------------------------------------------*
000000* 2. 異常系テストケース（Abnormal Case）
000000*---------------------------------------------------------------*
000000* ケースA : SQLエラー発生
000000*---------------------------------------------------------------*
000000* 条件
000000*   - SELECT / FETCH / UPDATE 実行時に SQLCODE < 0 が発生
000000*
000000* 期待結果
000000*   - CST-ABEND-BREAKPOINT に処理名が設定される
000000*   - ROLLBACK が実行される
000000*   - エラーメッセージ出力後、STOP RUN される
000000*---------------------------------------------------------------*
000000* ケースB : 日付不正（START_DATE > 現在日付）
000000*---------------------------------------------------------------*
000000* 条件
000000*   - START_DATE が現在日付より未来
000000*
000000* 処理内容
000000*   - 経過日数が負となるため 0 に補正される
000000*
000000* 期待結果
000000*   - 利息 = 0
000000*   - 処理は継続される
000000*---------------------------------------------------------------*
000000* ケースC : 無効パラメータ
000000*---------------------------------------------------------------*
000000* 条件
000000*   - PARM が '1','2','3' 以外
000000*
000000* 期待結果
000000*   - UNKNOWN PARAM メッセージ出力
000000*   - STOP RUN
000000*---------------------------------------------------------------*
000000* 備考
000000*---------------------------------------------------------------*
000000* - 利息計算はすべて DB 取得利率を使用する
000000* - FUNCTION-001 では満期判定は行わない
000000* - END_DATE は FUNCTION-001 では参照しない
000000*****************************************************************